import type { BlockShape } from "@/types/game";

/**
 * 블록 형태 정의 (2차원: 1 = 칸 존재, 0 = 빈칸)
 * 9x9 그리드에 맞춰 최대 9칸까지 사용 가능
 *
 * 인덱스 참조 (가로모드 드래그 고스트 방향 확인용, 총 29개, 인덱스 0~28):
 *  0: 1x1, 1: 2x1가로, 2: 2x1세로, 3: 3x1가로, 4: 3x1세로,
 *  5: ㄱ(왼위), 6: ㄱ(오위), 7: ㄴ(왼아래), 8: ㄴ(오아래),
 *  9: 2x2, 10: 4x1가로(I), 11: 4x1세로(I), 12: L, 13: J, 14: L(발위), 15: J(발위),
 * 16: T, 17: T세로, 18: Z, 19: S, 20: 큰L(3x2), 21: 작은L세로,
 * 22: 5x1가로, 23: 5x1세로, 24: 5칸L, 25: 5칸L반대, 26: +(플러스),
 * 27: T긴세로, 28: U자
 */
export const BLOCK_SHAPES: BlockShape[] = [
  // ---- 1칸 ----
  [[1]], // 1x1

  // ---- 2칸 ----
  [[1, 1]], // 2x1 가로
  [[1], [1]], // 2x1 세로

  // ---- 3칸 ----
  [[1, 1, 1]], // 3x1 가로
  [[1], [1], [1]], // 3x1 세로
  [
    [1, 1],
    [1, 0],
  ], // ㄱ (왼쪽 위)
  [
    [1, 1],
    [0, 1],
  ], // ㄱ (오른쪽 위)
  [
    [1, 0],
    [1, 1],
  ], // ㄴ (왼쪽 아래)
  [
    [0, 1],
    [1, 1],
  ], // ㄴ (오른쪽 아래)

  // ---- 4칸 ----
  [
    [1, 1],
    [1, 1],
  ], // 2x2 정사각형
  [[1, 1, 1, 1]], // 4x1 가로 (I)
  [[1], [1], [1], [1]], // 4x1 세로 (I)
  [
    [1, 1, 1],
    [1, 0, 0],
  ], // L
  [
    [1, 1, 1],
    [0, 0, 1],
  ], // J
  [
    [1, 0, 0],
    [1, 1, 1],
  ], // L 발 위 (180°)
  [
    [0, 0, 1],
    [1, 1, 1],
  ], // J 발 위 (180°)
  [
    [1, 1, 1],
    [0, 1, 0],
  ], // T
  [
    [1, 0],
    [1, 1],
    [1, 0],
  ], // T 세로
  [
    [1, 1, 0],
    [0, 1, 1],
  ], // Z
  [
    [0, 1, 1],
    [1, 1, 0],
  ], // S
  [
    [1, 1],
    [1, 1],
    [1, 0],
  ], // 큰 L (3x2)
  [
    [1, 1],
    [0, 1],
    [0, 1],
  ], // 작은 L 세로

  // ---- 5칸 ----
  [[1, 1, 1, 1, 1]], // 5x1 가로
  [[1], [1], [1], [1], [1]], // 5x1 세로
  [
    [1, 1, 1],
    [1, 1, 0],
  ], // 5칸 L
  [
    [1, 1, 1],
    [0, 1, 1],
  ], // 5칸 L 반대
  [
    [0, 1, 0],
    [1, 1, 1],
    [0, 1, 0],
  ], // + (플러스)
  [
    [1, 1, 1],
    [0, 1, 0],
    [0, 1, 0],
  ], // T 긴 세로
  [
    [1, 0, 0],
    [1, 1, 1],
    [1, 0, 0],
  ], // U 자
];

/** 블록 색상 (파스텔) — 블록 형태 29개별로 서로 다른 색 */
export const BLOCK_COLORS = [
  "#a8b5ff", // 0
  "#c5a3ff",
  "#ffb3e6",
  "#7fdfd4",
  "#ffd89b",
  "#ff9f9f",
  "#b5c4ff",
  "#d4b3ff",
  "#ffc4e6",
  "#8fefdf",
  "#ffe0ab",
  "#ffafaf",
  "#a8e6cf",
  "#dda0dd",
  "#87ceeb",
  "#f0e68c",
  "#c9a0dc", // 16
  "#98d8aa",
  "#f7dc6f",
  "#bb8fce",
  "#85c1e9",
  "#f8b88b",
  "#a3e4d7",
  "#fadbd8",
  "#aed6f1",
  "#f9e79f",
  "#d7bde2",
  "#a2d9ce",
  "#e8daef", // 27
  "#abebde", // 28
];

export function getRandomBlockId(seed: number): number {
  return Math.abs(Math.floor(Math.sin(seed) * 1e6)) % BLOCK_SHAPES.length;
}

export function getBlockColor(index: number): string {
  return BLOCK_COLORS[index % BLOCK_COLORS.length];
}
