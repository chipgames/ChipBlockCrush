var bt=Object.defineProperty;var vt=(n,e,t)=>e in n?bt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var xt=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Ne=(n,e,t)=>(vt(n,typeof e!="symbol"?e+"":e,t),t);var de=(n,e,t)=>new Promise((a,o)=>{var r=u=>{try{f(t.next(u))}catch(h){o(h)}},c=u=>{try{f(t.throw(u))}catch(h){o(h)}},f=u=>u.done?a(u.value):Promise.resolve(u.value).then(r,c);f((t=t.apply(n,e)).next())});import{r as i,a as lt,R as St}from"./vendor-ffc9ac40.js";import{W as kt,q as jt}from"./helmet-6da975a7.js";var gn=xt(xe=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}})();var ct={exports:{}},Ie={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ct=i,Nt=Symbol.for("react.element"),Et=Symbol.for("react.fragment"),Rt=Object.prototype.hasOwnProperty,Tt=Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,It={key:!0,ref:!0,__self:!0,__source:!0};function it(n,e,t){var a,o={},r=null,c=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(c=e.ref);for(a in e)Rt.call(e,a)&&!It.hasOwnProperty(a)&&(o[a]=e[a]);if(n&&n.defaultProps)for(a in e=n.defaultProps,e)o[a]===void 0&&(o[a]=e[a]);return{$$typeof:Nt,type:n,key:r,ref:c,props:o,_owner:Tt.current}}Ie.Fragment=Et;Ie.jsx=it;Ie.jsxs=it;ct.exports=Ie;var s=ct.exports,De={},Xe=lt;De.createRoot=Xe.createRoot,De.hydrateRoot=Xe.hydrateRoot;class Lt extends i.Component{constructor(){super(...arguments);Ne(this,"state",{hasError:!1})}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,a){console.error("[ChipBlockCrush]",t,a)}render(){return this.state.hasError?s.jsxs("div",{className:"error-boundary",children:[s.jsx("h2",{children:"ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"}),s.jsx("p",{children:"íŽ˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨ í•´ ì£¼ì„¸ìš”."}),s.jsx("button",{type:"button",onClick:()=>window.location.reload(),children:"ìƒˆë¡œê³ ì¹¨"})]}):this.props.children}}const Mt="modulepreload",_t=function(n){return"/ChipBlockCrush/"+n},Ke={},we=function(e,t,a){if(!t||t.length===0)return e();const o=document.getElementsByTagName("link");return Promise.all(t.map(r=>{if(r=_t(r),r in Ke)return;Ke[r]=!0;const c=r.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(!!a)for(let d=o.length-1;d>=0;d--){const m=o[d];if(m.href===r&&(!c||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${f}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":Mt,c||(h.as="script",h.crossOrigin=""),h.href=r,document.head.appendChild(h),c)return new Promise((d,m)=>{h.addEventListener("load",d),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e()).catch(r=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=r,window.dispatchEvent(c),!c.defaultPrevented)throw r})},Pt=(n,e)=>{const t=n[e];return t?typeof t=="function"?t():Promise.resolve(t):new Promise((a,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+e)))})},Te=["ko","en","ja","zh"],Ot="ko",At={ko:"í•œêµ­ì–´",en:"English",ja:"æ—¥æœ¬èªž",zh:"ä¸­æ–‡"},be={debug:(...n)=>{},info:(...n)=>console.info("[ChipBlockCrush]",...n),warn:(...n)=>console.warn("[ChipBlockCrush]",...n),error:(...n)=>console.error("[ChipBlockCrush]",...n)},Ve="language";class Je{detectBrowserLanguage(){const e=navigator.language.split("-")[0];return Te.includes(e)?e:Ot}getStoredLanguage(){try{return localStorage.getItem(Ve)}catch(e){return be.error("Failed to get stored language",{error:e}),null}}setLanguage(e){if(Te.includes(e))try{localStorage.setItem(Ve,e),window.dispatchEvent(new CustomEvent("languageChanged",{detail:e})),be.debug("Language changed",{language:e})}catch(t){be.error("Failed to set language",{error:t,language:e})}}getCurrentLanguage(){const e=this.getStoredLanguage();return e&&Te.includes(e)?e:this.detectBrowserLanguage()}}const Be={},Q=()=>{const[n,e]=i.useState(()=>new Je().getCurrentLanguage()),[t,a]=i.useState(null),[o,r]=i.useState(!0);return i.useEffect(()=>{(()=>de(xe,null,function*(){r(!0);try{if(Be[n]){a(Be[n]),r(!1);return}const h=yield Pt(Object.assign({"../locales/en.json":()=>we(()=>import("./en-c2e2a447.js"),[]),"../locales/ja.json":()=>we(()=>import("./ja-cc23267b.js"),[]),"../locales/ko.json":()=>we(()=>import("./ko-05d70a25.js"),[]),"../locales/zh.json":()=>we(()=>import("./zh-41723db7.js"),[])}),`../locales/${n}.json`);Be[n]=h.default,a(h.default)}catch(h){try{const d=yield we(()=>import("./ko-05d70a25.js"),[]);a(d.default)}catch(d){a({})}}finally{r(!1)}}))()},[n]),i.useEffect(()=>{const u=h=>{const d=h;d.detail&&(d.detail==="ko"||d.detail==="en"||d.detail==="ja"||d.detail==="zh")&&e(d.detail)};return window.addEventListener("languageChanged",u),()=>window.removeEventListener("languageChanged",u)},[]),{language:n,setLanguage:u=>{new Je().setLanguage(u),(u==="ko"||u==="en"||u==="ja"||u==="zh")&&e(u)},t:u=>{if(o||!t)return u;const h=u.split(".");let d=t;for(const m of h)if(d=d==null?void 0:d[m],d===void 0)break;return(typeof d=="string"?d:u)||u},isLoading:o}};function ut(){const[n,e]=i.useState(null),[t,a]=i.useState(!1),[o,r]=i.useState(!1);return i.useEffect(()=>{if(typeof window=="undefined")return;const u=window.matchMedia("(display-mode: standalone)").matches||navigator.standalone===!0;a(u);const h=/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1;r(h);const d=m=>{m.preventDefault(),e(m)};return window.addEventListener("beforeinstallprompt",d),()=>window.removeEventListener("beforeinstallprompt",d)},[]),{canInstall:!!n&&!t,isIOS:o,isStandalone:t,promptInstall:()=>de(this,null,function*(){n&&(yield n.prompt(),yield n.userChoice,e(null))})}}const qe=i.memo(()=>{const{language:n,setLanguage:e}=Q();return s.jsx("select",{className:"language-selector",value:n,onChange:t=>e(t.target.value),"aria-label":"ì–¸ì–´ ì„ íƒ",children:Te.map(t=>s.jsx("option",{value:t,children:At[t]},t))})});qe.displayName="LanguageSelector";const Qe="chipBlockCrush_",X={get(n,e={}){var a,o;const t=Qe+n;try{const r=localStorage.getItem(t);return r===null?(a=e.fallback)!=null?a:null:JSON.parse(r)}catch(r){return e.silent||be.warn("storage get failed",t,r),(o=e.fallback)!=null?o:null}},set(n,e,t={}){const a=Qe+n;try{localStorage.setItem(a,JSON.stringify(e))}catch(o){t.silent||be.warn("storage set failed",a,o)}}},$e="theme",Bt=()=>{if(typeof window=="undefined")return"dark";try{return window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"}catch(n){return"dark"}},ze=n=>{if(typeof document=="undefined")return;document.documentElement.setAttribute("data-theme",n);const e=document.querySelector('meta[name="theme-color"]');e&&e.setAttribute("content",n==="light"?"#f5f5f8":"#1a1a2e")},dt=()=>{const[n,e]=i.useState(()=>{const o=X.get($e,{fallback:null,silent:!0});return o==="light"||o==="dark"?o:Bt()}),t=i.useCallback(()=>{e(o=>{const r=o==="light"?"dark":"light";return X.set($e,r,{silent:!0}),ze(r),r})},[]),a=i.useCallback(o=>{e(o),X.set($e,o,{silent:!0}),ze(o)},[]);return i.useEffect(()=>{ze(n)},[n]),{theme:n,toggleTheme:t,setTheme:a,isLight:n==="light",isDark:n==="dark"}},ht=i.memo(()=>{const{t:n}=Q(),{theme:e,toggleTheme:t}=dt(),a=e==="light";return s.jsx("button",{type:"button",className:"theme-toggle",onClick:t,title:n(a?"header.darkMode":"header.lightMode"),"aria-label":n(a?"header.darkMode":"header.lightMode"),children:a?"ðŸŒ™":"â˜€ï¸"})});ht.displayName="ThemeToggle";class $t{constructor(){Ne(this,"enabled",!0);Ne(this,"ctx",null)}setEnabled(e){this.enabled=e}getContext(){return typeof window=="undefined"||!window.AudioContext?null:(this.ctx||(this.ctx=new window.AudioContext),this.ctx)}playClick(){if(!this.enabled)return;const e=this.getContext();if(!e)return;const t=()=>{try{const a=e.currentTime,o=e.createOscillator(),r=e.createGain();o.connect(r),r.connect(e.destination),o.type="sine",o.frequency.setValueAtTime(880,a),o.frequency.exponentialRampToValueAtTime(440,a+.05),r.gain.setValueAtTime(.12,a),r.gain.exponentialRampToValueAtTime(.001,a+.08),o.start(a),o.stop(a+.08)}catch(a){}};e.state==="suspended"?e.resume().then(t).catch(()=>{}):t()}playPlace(){if(!this.enabled)return;const e=this.getContext();if(!e)return;const t=()=>{try{const a=e.currentTime,o=e.createOscillator(),r=e.createGain();o.connect(r),r.connect(e.destination),o.type="sine",o.frequency.setValueAtTime(660,a),r.gain.setValueAtTime(.1,a),r.gain.exponentialRampToValueAtTime(.001,a+.06),o.start(a),o.stop(a+.06)}catch(a){}};e.state==="suspended"?e.resume().then(t).catch(()=>{}):t()}}const Ge=new $t,ft=i.memo(({onNavigate:n,onStartGame:e})=>{const{t}=Q(),{canInstall:a,isIOS:o,isStandalone:r,promptInstall:c}=ut(),f=!r,[u,h]=i.useState(()=>{var p;return(p=X.get("soundEnabled",{fallback:!0,silent:!0}))!=null?p:!0}),[d,m]=i.useState(!1);i.useEffect(()=>{Ge.setEnabled(u),X.set("soundEnabled",u,{silent:!0})},[u]),i.useEffect(()=>(document.body.style.overflow=d?"hidden":"",()=>{document.body.style.overflow=""}),[d]);const y=p=>{n==null||n(p),m(!1)},C=()=>{h(p=>!p),u&&Ge.playClick()},N=()=>de(xe,null,function*(){a?(yield c(),m(!1)):o?(window.alert(t("menu.installInstructionsIOS")),m(!1)):(window.alert(t("menu.installInstructionsFallback")),m(!1))});return s.jsx("header",{className:"header",children:s.jsxs("div",{className:"header-content",children:[s.jsxs("div",{className:"header-logo",onClick:()=>y("menu"),role:"button",tabIndex:0,onKeyDown:p=>p.key==="Enter"&&y("menu"),children:[s.jsx("img",{src:"/ChipBlockCrush/ChipGames_Logo.png",alt:t("header.logo"),className:"header-logo-img"}),s.jsx("span",{className:"header-game-title",children:t("header.gameTitle")})]}),d&&s.jsx("div",{className:"header-nav-overlay",onClick:()=>m(!1),"aria-hidden":!0}),s.jsxs("nav",{className:`header-nav ${d?"mobile-open":""}`,children:[s.jsx("button",{type:"button",className:"header-nav-button",onClick:()=>e?e():y("menu"),children:t("header.playGame")}),f&&s.jsx("button",{type:"button",className:"header-nav-button header-nav-button-download",onClick:N,children:t("header.download")}),s.jsx("button",{type:"button",className:"header-nav-button",onClick:()=>y("guide"),children:t("header.guide")}),s.jsx("button",{type:"button",className:"header-nav-button",onClick:()=>y("help"),children:t("header.help")}),s.jsx("button",{type:"button",className:"header-nav-button",onClick:()=>y("about"),children:t("header.about")})]}),s.jsxs("div",{className:"header-right",children:[s.jsx(ht,{}),s.jsx("button",{type:"button",className:"header-sound-button",onClick:C,title:t(u?"header.soundOff":"header.soundOn"),"aria-label":t(u?"header.soundOff":"header.soundOn"),children:u?"ðŸ”Š":"ðŸ”‡"}),s.jsx(qe,{}),s.jsxs("button",{type:"button",className:"header-hamburger",onClick:()=>m(p=>!p),"aria-label":"ë©”ë‰´","aria-expanded":d,children:[s.jsx("span",{className:`hamburger-line ${d?"active":""}`}),s.jsx("span",{className:`hamburger-line ${d?"active":""}`}),s.jsx("span",{className:`hamburger-line ${d?"active":""}`})]})]})]})})});ft.displayName="Header";const zt="1.0.5",mt=i.memo(({onNavigate:n})=>{const{t:e}=Q();return s.jsx("footer",{className:"footer",role:"contentinfo",children:s.jsxs("div",{className:"footer-content",children:[s.jsxs("nav",{className:"footer-links",children:[n?s.jsx("button",{type:"button",className:"footer-link footer-link-button",onClick:()=>n("privacy"),children:e("footer.privacy")}):s.jsx("a",{href:"#privacy",className:"footer-link",children:e("footer.privacy")}),s.jsx("a",{href:"#contact",className:"footer-link",children:e("footer.contact")})]}),s.jsx("div",{className:"footer-center",children:s.jsx(qe,{})}),s.jsxs("div",{className:"footer-copyright",children:[e("footer.copyright")," | v",zt]})]})})});mt.displayName="Footer";const Dt=({children:n})=>s.jsx("div",{className:"game-container",children:n}),Gt=({onNavigate:n,onStartGame:e})=>{const{t}=Q(),{canInstall:a,isIOS:o,isStandalone:r,promptInstall:c}=ut(),[f,u]=i.useState(!1),[h,d]=i.useState(null),m=!r,y=()=>de(xe,null,function*(){a?yield c():o?(d("ios"),u(!0)):(d("fallback"),u(!0))});return s.jsxs("div",{className:"menu-screen",children:[s.jsx("div",{className:"menu-logo-wrap",children:s.jsx("img",{src:"/ChipBlockCrush/ChipGames_Logo.png",alt:t("header.logo"),className:"menu-logo"})}),s.jsx("h1",{className:"menu-title",children:t("header.gameTitle")}),s.jsx("p",{className:"menu-desc",children:t("menu.subtitle")}),s.jsx("button",{type:"button",className:"menu-play-btn",onClick:e,children:t("header.playGame")}),s.jsxs("nav",{className:"menu-links",children:[m&&s.jsx("button",{type:"button",className:"menu-link menu-link-download",onClick:y,children:t("header.download")}),s.jsx("button",{type:"button",className:"menu-link",onClick:()=>n("guide"),children:t("header.guide")}),s.jsx("button",{type:"button",className:"menu-link",onClick:()=>n("help"),children:t("header.help")}),s.jsx("button",{type:"button",className:"menu-link",onClick:()=>n("about"),children:t("header.about")})]}),f&&h&&s.jsx("div",{className:"menu-ios-install-overlay",onClick:()=>{u(!1),d(null)},role:"dialog","aria-modal":"true","aria-label":t(h==="ios"?"menu.installInstructionsIOS":"menu.installInstructionsFallback"),children:s.jsxs("div",{className:"menu-ios-install-box",onClick:C=>C.stopPropagation(),children:[s.jsx("p",{className:"menu-ios-install-text",children:t(h==="ios"?"menu.installInstructionsIOS":"menu.installInstructionsFallback")}),s.jsx("button",{type:"button",className:"menu-ios-install-close",onClick:()=>{u(!1),d(null)},children:t("menu.confirm")})]})})]})},fe=[[[1]],[[1,1]],[[1],[1]],[[1,1,1]],[[1],[1],[1]],[[1,1],[1,0]],[[1,1],[0,1]],[[1,0],[1,1]],[[0,1],[1,1]],[[1,1],[1,1]],[[1,1,1,1]],[[1],[1],[1],[1]],[[1,1,1],[1,0,0]],[[1,0],[1,0],[1,1]],[[0,0,1],[1,1,1]],[[1,1],[0,1],[0,1]],[[1,1,1],[0,0,1]],[[0,1],[0,1],[1,1]],[[1,0,0],[1,1,1]],[[1,1],[1,0],[1,0]],[[1,1,1],[0,1,0]],[[1,0],[1,1],[1,0]],[[0,1,0],[1,1,1]],[[0,1],[1,1],[0,1]],[[1,1,0],[0,1,1]],[[0,1],[1,1],[1,0]],[[0,1,1],[1,1,0]],[[1,0],[1,1],[0,1]],[[1,0],[1,1],[1,1]],[[1,1,1],[1,1,0]],[[1,1],[1,1],[0,1]],[[0,1,1],[1,1,1]],[[1,1,0],[1,1,1]],[[1,1],[1,1],[1,0]],[[1,1,1],[0,1,1]],[[0,1],[1,1],[1,1]],[[1,1,1,1,1]],[[1],[1],[1],[1],[1]],[[0,1,0],[1,1,1],[0,1,0]],[[1,1,1],[0,1,0],[0,1,0]],[[0,0,1],[1,1,1],[0,0,1]],[[0,1,0],[0,1,0],[1,1,1]],[[1,0,0],[1,1,1],[1,0,0]]];function Ft(n,e,t){e/=100,t/=100;const a=e*Math.min(t,1-t),o=u=>{const h=(u+n/30)%12;return t-a*Math.max(Math.min(h-3,9-h,1),-1)},r=Math.round(o(0)*255),c=Math.round(o(8)*255),f=Math.round(o(4)*255);return"#"+[r,c,f].map(u=>u.toString(16).padStart(2,"0")).join("")}const Ht=72,qt=72,Ze=Array.from({length:fe.length},(n,e)=>Ft(e*360/fe.length,Ht,qt));function et(n){return Math.abs(Math.floor(Math.sin(n)*1e6))%fe.length}function ve(n){return Ze[n%Ze.length]}function Wt({shape:n,colorIndex:e}){var u,h;const t=ve(e),a=n.length,o=(h=(u=n[0])==null?void 0:u.length)!=null?h:0,r=10,c=o*r,f=a*r;return s.jsx("svg",{viewBox:`0 0 ${c} ${f}`,className:"guide-block-preview",preserveAspectRatio:"xMidYMid meet",children:n.map((d,m)=>d.map((y,C)=>y?s.jsx("rect",{x:C*r+.5,y:m*r+.5,width:r-1,height:r-1,fill:t,stroke:"rgba(255,255,255,0.5)",strokeWidth:.5,rx:2},`${m}-${C}`):null))})}const Yt=({onNavigate:n})=>{const{t:e}=Q();return s.jsxs("div",{className:"guide-screen",children:[s.jsx("h1",{className:"guide-title",children:e("guide.title")}),s.jsx("p",{className:"guide-description",children:e("guide.description")}),s.jsx("h2",{className:"guide-section-title",children:e("guide.basicTitle")}),s.jsxs("ol",{className:"guide-steps",children:[s.jsx("li",{children:e("guide.step1")}),s.jsx("li",{children:e("guide.step2")}),s.jsx("li",{children:e("guide.step3")})]}),s.jsx("h2",{className:"guide-section-title",children:e("guide.blocksTitle")}),s.jsx("p",{className:"guide-blocks-intro",children:e("guide.blocksIntro")}),s.jsx("div",{className:"guide-blocks-grid",children:fe.map((t,a)=>s.jsx("div",{className:"guide-block-cell",children:s.jsx(Wt,{shape:t,colorIndex:a})},a))}),s.jsx("h2",{className:"guide-section-title",children:e("guide.controlsTitle")}),s.jsxs("ul",{className:"guide-list",children:[s.jsx("li",{children:e("guide.controlsPc")}),s.jsx("li",{children:e("guide.controlsMobile")})]}),s.jsx("h2",{className:"guide-section-title",children:e("guide.tipsTitle")}),s.jsxs("ul",{className:"guide-list",children:[s.jsx("li",{children:e("guide.tips1")}),s.jsx("li",{children:e("guide.tips2")}),s.jsx("li",{children:e("guide.tips3")})]}),s.jsx("button",{type:"button",className:"guide-back",onClick:()=>n("menu"),children:e("header.playGame")})]})},Ut=[["faq1","faq1a"],["faq2","faq2a"],["faq3","faq3a"],["faq4","faq4a"],["faq5","faq5a"],["faq6","faq6a"]],Xt=({onNavigate:n})=>{const{t:e}=Q();return s.jsxs("div",{className:"help-screen",children:[s.jsx("h1",{className:"help-title",children:e("help.title")}),s.jsx("p",{className:"help-intro",children:e("help.intro")}),s.jsx("div",{className:"help-faq",children:Ut.map(([t,a])=>s.jsxs("div",{className:"help-faq-item",children:[s.jsx("p",{className:"help-faq-q",children:e(`help.${t}`)}),s.jsx("p",{className:"help-faq-a",children:e(`help.${a}`)})]},t))}),s.jsx("button",{type:"button",className:"help-back",onClick:()=>n("menu"),children:e("header.playGame")})]})},Kt=({onNavigate:n})=>{const{t:e}=Q();return s.jsxs("div",{className:"about-screen",children:[s.jsx("h1",{className:"about-title",children:e("about.title")}),s.jsx("p",{className:"about-description",children:e("about.description")}),s.jsx("h2",{className:"about-section-title",children:e("about.featuresTitle")}),s.jsxs("ul",{className:"about-features",children:[s.jsx("li",{children:e("about.features1")}),s.jsx("li",{children:e("about.features2")}),s.jsx("li",{children:e("about.features3")})]}),s.jsx("p",{className:"about-credits",children:e("about.credits")}),s.jsx("p",{className:"about-contact",children:e("about.contactText")}),s.jsx("button",{type:"button",className:"about-back",onClick:()=>n("menu"),children:e("header.playGame")})]})},Vt=[["section1Title","section1Content"],["section2Title","section2Content"],["section3Title","section3Content"],["section4Title","section4Content"],["section5Title","section5Content"]],Jt=({onNavigate:n})=>{const{t:e}=Q();return s.jsxs("div",{className:"privacy-screen",children:[s.jsx("h1",{className:"privacy-title",children:e("privacy.title")}),s.jsx("p",{className:"privacy-updated",children:e("privacy.lastUpdated")}),s.jsx("p",{className:"privacy-intro",children:e("privacy.intro")}),s.jsx("div",{className:"privacy-sections",children:Vt.map(([t,a])=>s.jsxs("section",{className:"privacy-section",children:[s.jsx("h2",{className:"privacy-section-title",children:e(`privacy.${t}`)}),s.jsx("p",{className:"privacy-section-content",children:e(`privacy.${a}`)})]},t))}),s.jsx("button",{type:"button",className:"privacy-back",onClick:()=>n("menu"),children:e("header.playGame")})]})},Qt=16/9;function Zt(n,e){const t=Qt,a=n/e;let o,r;return a>t?(r=e,o=e*t):(o=n,r=n/t),{width:Math.floor(o),height:Math.floor(r)}}const Fe=9,tt=3,en=10,nt=[0,20,30,40,50,60,70,80,90,100];function st(n=Fe){return Array.from({length:n},()=>Array(n).fill(0))}function he(n,e,t,a){var f,u;const o=e.length,r=(u=(f=e[0])==null?void 0:f.length)!=null?u:0,c=n.length;if(t<0||a<0||t+o>c||a+r>c)return!1;for(let h=0;h<o;h++)for(let d=0;d<r;d++)if(e[h][d]&&n[t+h][a+d]!==0)return!1;return!0}const gt=63;function tn(n,e,t,a,o,r){var d,m;const c=n.map(y=>[...y]),f=e.length,u=(m=(d=e[0])==null?void 0:d.length)!=null?m:0,h=o<<6|r&gt;for(let y=0;y<f;y++)for(let C=0;C<u;C++)e[y][C]&&(c[t+y][a+C]=h);return c}function nn(n){return n>0?n&gt:0}function We(n){var o,r;let e=0,t=0,a=0;for(let c=0;c<n.length;c++)for(let f=0;f<((r=(o=n[0])==null?void 0:o.length)!=null?r:0);f++)n[c][f]&&(e+=c,t+=f,a++);return a===0?{row:0,col:0}:{row:Math.floor(e/a),col:Math.floor(t/a)}}const Ee=2;function ot(n,e,t,a){const o=We(e),r=t-o.row,c=a-o.col;let f=null,u=1/0;for(let h=-Ee;h<=Ee;h++)for(let d=-Ee;d<=Ee;d++){const m=r+h,y=c+d;if(!he(n,e,m,y))continue;const C=m+o.row,N=y+o.col,p=Math.abs(C-t)+Math.abs(N-a);p<u&&(u=p,f={row:m,col:y})}return f}function sn(n){const e=n.length,t=[],a=[];for(let o=0;o<e;o++){let r=!0,c=!0;for(let f=0;f<e;f++)n[o][f]===0&&(r=!1),n[f][o]===0&&(c=!1);r&&t.push(o),c&&a.push(o)}return{rows:t,cols:a}}function on(n,e,t){const a=n.length,o=n.map(r=>[...r]);for(const r of e)for(let c=0;c<a;c++)o[r][c]=0;for(const r of t)for(let c=0;c<a;c++)o[c][r]=0;return o}function rn(n,e){var o;const t=n*en,a=(o=nt[Math.min(e,nt.length-1)])!=null?o:0;return t+a}function an(n,e){var a,o;const t=n.length;for(const r of e){const c=fe[r];if(!c)continue;const f=c.length,u=(o=(a=c[0])==null?void 0:a.length)!=null?o:0;for(let h=0;h<=t-f;h++)for(let d=0;d<=t-u;d++)if(he(n,c,h,d))return!0}return!1}function He(n){var e;return(e=fe[n])!=null?e:null}function ln(n,e,t,a){const r=Math.min(n/400,e/300,1.2),c=Math.max(28,36*r),f=Math.max(56,72*r),u=Math.max(56,70*r),h=Math.max(22,28*r),d=Math.max(44,52*r),m=4,y=n-f-8*2,C=e-c-8*2,N=Math.min(y/t,C/t),p=8+(y-N*t)/2,H=c+8+(C-N*t)/2,D={x:8,y:8,w:u,h},k=[],P=n-f+(f-d)/2;let W=c+8;for(let Y=0;Y<a;Y++)k.push({x:P,y:W,w:d,h:d}),W+=d+m;return{padding:8,scale:r,topBarHeight:c,rightPanelWidth:f,menuRect:D,trayRects:k,offsetX:p,offsetY:H,cellSize:N,gridSize:t,traySlotSize:d}}const pt=i.forwardRef(({grid:n,onCellClick:e,preview:t,score:a=0,scoreLabel:o,bestScore:r=0,bestScoreLabel:c,onBack:f,backLabel:u,placeHintLabel:h,currentBlockIndices:d=[],selectedIndex:m=null,onBlockTrayClick:y,onBlockTrayPointerDown:C,onLayout:N,isLandscapeMode:p=!1},H)=>{const D=i.useRef(null),k=i.useRef(null),P=i.useRef(null),W=i.useRef(p);W.current=p;const Y=n.length;i.useImperativeHandle(H,()=>({getCellFromPoint(l,x){const w=k.current;if(!w||!P.current)return null;const S=w.getBoundingClientRect();let g=l-S.left,j=x-S.top;if(W.current){const R=parseInt(w.style.width||"0",10),Z=parseInt(w.style.height||"0",10);if(R&&Z){const re=l-S.left;g=x-S.top,j=Z-re}}const E=P.current,I=Math.floor((g-E.offsetX)/E.cellSize),b=Math.floor((j-E.offsetY)/E.cellSize);return b>=0&&b<E.gridSize&&I>=0&&I<E.gridSize?{row:b,col:I}:null},getCellSize(){var l,x;return(x=(l=P.current)==null?void 0:l.cellSize)!=null?x:24}}),[]);const G=i.useCallback((l,x,w)=>{var le,ue;const S=Math.max(1,d.length),g=ln(x,w,Y,S);P.current=g,N==null||N({cellSize:g.cellSize});const{padding:j,scale:E,rightPanelWidth:I,menuRect:b,trayRects:R,offsetX:Z,offsetY:re}=g,Se=8;l.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--canvas-bg").trim()||"#1a1a1a",l.fillRect(0,0,x,w);const K=document.documentElement.getAttribute("data-theme")==="light",Le=K?"rgba(220, 222, 235, 0.95)":"rgba(40, 42, 62, 0.95)",Me=K?"rgba(124, 138, 255, 0.55)":"rgba(168, 181, 255, 0.5)",_e=K?"rgba(0,0,0,0.03)":"rgba(255,255,255,0.04)",Pe=K?"rgba(0,0,0,0.12)":"rgba(255,255,255,0.22)",ke=K?"#2d2d2d":"#e8e8e8",v=K?"rgba(168, 181, 255, 0.35)":"rgba(102, 126, 234, 0.4)",$=K?"rgba(124, 138, 255, 0.6)":"rgba(168, 181, 255, 0.6)",ee=Math.max(10,12*E);l.font=`600 ${ee}px -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif`,l.textAlign="left",l.textBaseline="middle",f&&u&&(l.fillStyle=v,l.strokeStyle=$,l.lineWidth=2,typeof l.roundRect=="function"?(l.beginPath(),l.roundRect(b.x,b.y,b.w,b.h,8),l.fill(),l.stroke()):(l.fillRect(b.x,b.y,b.w,b.h),l.strokeRect(b.x,b.y,b.w,b.h)),l.fillStyle=ke,l.textAlign="center",l.fillText(u,b.x+b.w/2,b.y+b.h/2),l.textAlign="left");const U=b.x+b.w+j,q=b.y+b.h/2,ne=ee+2;l.textAlign="left",l.fillStyle=ke,l.fillText(o!=null?`${o}: ${a}`:String(a),U,q,x-U-I-j),c!=null&&l.fillText(`${c}: ${r}`,U,q+ne,x-U-I-j),d.forEach((F,J)=>{var pe,ye;const L=R[J];if(!L)return;const z=He(F);if(m===J&&(l.fillStyle="rgba(168, 181, 255, 0.25)",l.strokeStyle="rgba(168, 181, 255, 0.8)",l.lineWidth=2,typeof l.roundRect=="function"&&(l.beginPath(),l.roundRect(L.x-2,L.y-2,L.w+4,L.h+4,10),l.fill(),l.stroke())),z){const Oe=z.length,Ae=(ye=(pe=z[0])==null?void 0:pe.length)!=null?ye:0,ie=Math.min((L.w-8)/Ae,(L.h-8)/Oe,14),yt=L.x+(L.w-Ae*ie)/2,wt=L.y+(L.h-Oe*ie)/2;l.fillStyle=ve(F),l.strokeStyle="rgba(255,255,255,0.4)",l.lineWidth=1;for(let je=0;je<Oe;je++)for(let Ce=0;Ce<Ae;Ce++)if(z[je][Ce]){const Ye=yt+Ce*ie+1,Ue=wt+je*ie+1;l.fillRect(Ye,Ue,ie-2,ie-2),l.strokeRect(Ye,Ue,ie-2,ie-2)}}});const T=g.cellSize*Y,O=g.cellSize*Y,V=Z-2,A=re-2,M=T+4,_=O+4;l.beginPath(),typeof l.roundRect=="function"?l.roundRect(V,A,M,_,Se):l.rect(V,A,M,_),l.fillStyle=Le,l.fill(),l.strokeStyle=Me,l.lineWidth=3,l.stroke();for(let F=0;F<Y;F++)for(let J=0;J<Y;J++){const L=Z+J*g.cellSize,z=re+F*g.cellSize,ce=n[F][J];ce>0?(l.fillStyle=ve(nn(ce)),l.fillRect(L+2,z+2,g.cellSize-4,g.cellSize-4),l.strokeStyle="rgba(255,255,255,0.35)",l.lineWidth=1,l.strokeRect(L+2,z+2,g.cellSize-4,g.cellSize-4)):(l.fillStyle=_e,l.fillRect(L+1,z+1,g.cellSize-2,g.cellSize-2),l.strokeStyle=Pe,l.lineWidth=1,l.strokeRect(L+1,z+1,g.cellSize-2,g.cellSize-2))}if(t&&t.shape){const F=t.colorIndex!==void 0?ve(t.colorIndex):"rgba(168, 181, 255, 0.6)";l.fillStyle=F,l.globalAlpha=.7,l.strokeStyle="rgba(255,255,255,0.6)",l.lineWidth=2;const J=t.shape.length,L=(ue=(le=t.shape[0])==null?void 0:le.length)!=null?ue:0;for(let z=0;z<J;z++)for(let ce=0;ce<L;ce++)if(t.shape[z][ce]){const pe=Z+(t.col+ce)*g.cellSize+2,ye=re+(t.row+z)*g.cellSize+2;l.fillRect(pe,ye,g.cellSize-4,g.cellSize-4),l.strokeRect(pe,ye,g.cellSize-4,g.cellSize-4)}l.globalAlpha=1}},[n,Y,t,a,o,r,c,u,f,d,m,N]);i.useEffect(()=>{const l=D.current,x=k.current;if(!l||!x)return;const w=x.getContext("2d");if(!w)return;const S=()=>{const j=l.clientWidth,E=l.clientHeight,{width:I,height:b}=Zt(j,E),R=window.devicePixelRatio||1;x.width=I*R,x.height=b*R,x.style.width=`${I}px`,x.style.height=`${b}px`,w.setTransform(1,0,0,1,0,0),w.scale(R,R),G(w,I,b)};S();const g=new ResizeObserver(S);return g.observe(l),()=>g.disconnect()},[G]),i.useEffect(()=>{const l=k.current;if(!l)return;const x=l.getContext("2d");if(!x)return;const w=parseInt(l.style.width||"0",10),S=parseInt(l.style.height||"0",10);w&&S&&G(x,w,S)},[n,G]);const te=i.useCallback((l,x)=>{const w=k.current;if(!w)return null;const S=w.getBoundingClientRect(),g=l-S.left,j=x-S.top;if(!p)return{px:g,py:j};const E=parseInt(w.style.width||"0",10),I=parseInt(w.style.height||"0",10);if(!E||!I)return{px:g,py:j};const b=j,R=I-g;return{px:b,py:R}},[p]),B=i.useCallback(l=>{const x="touches"in l?l.touches[0].clientX:l.clientX,w="touches"in l?l.touches[0].clientY:l.clientY,S=te(x,w);if(!S||!P.current||!C)return;const j=P.current.trayRects.findIndex(E=>S.px>=E.x&&S.px<=E.x+E.w&&S.py>=E.y&&S.py<=E.y+E.h);j>=0&&C(j,x,w)},[te,C]),ae=i.useCallback((l,x)=>{const w=te(l,x);if(!w)return;const{px:S,py:g}=w,j=P.current;if(!j)return;if(f&&u){const R=j.menuRect;if(S>=R.x&&S<=R.x+R.w&&g>=R.y&&g<=R.y+R.h){f();return}}const E=j.trayRects.findIndex(R=>S>=R.x&&S<=R.x+R.w&&g>=R.y&&g<=R.y+R.h);if(E>=0&&y){y(E);return}const I=Math.floor((S-j.offsetX)/j.cellSize),b=Math.floor((g-j.offsetY)/j.cellSize);e&&b>=0&&b<j.gridSize&&I>=0&&I<j.gridSize&&e(b,I)},[te,f,u,y,e]),se=i.useCallback(l=>{ae(l.clientX,l.clientY)},[ae]),oe=i.useRef(null),me=i.useCallback(l=>{oe.current={x:l.touches[0].clientX,y:l.touches[0].clientY,t:Date.now()}},[]),ge=i.useCallback(l=>{const x=oe.current;if(oe.current=null,!x||!l.changedTouches[0])return;const w=l.changedTouches[0].clientX-x.x,S=l.changedTouches[0].clientY-x.y;Date.now()-x.t<=400&&w*w+S*S<=400&&(l.preventDefault(),ae(l.changedTouches[0].clientX,l.changedTouches[0].clientY))},[ae]);return s.jsx("div",{ref:D,className:"block-crush-canvas-wrap",children:s.jsx("canvas",{ref:k,className:"block-crush-canvas",onClick:se,onMouseDown:B,onTouchStart:l=>{B(l),me(l)},onTouchEnd:ge,"aria-label":h})})});pt.displayName="BlockCrushCanvas";const rt="landscapeMode",at="highScore",cn=({stageNumber:n,onBack:e})=>{const{t}=Q(),a=i.useRef(null),[o,r]=i.useState(()=>st(Fe)),[c,f]=i.useState([]),[u,h]=i.useState(null),[d,m]=i.useState(0),[y,C]=i.useState(()=>{if(typeof window=="undefined")return 0;const v=X.get(at,{fallback:0,silent:!0});return typeof v=="number"&&v>=0?v:0}),[N,p]=i.useState(!1),[H,D]=i.useState(1),[k,P]=i.useState(()=>{if(typeof window=="undefined")return!1;const v=X.get(rt,{fallback:!1,silent:!0});return v!=null?v:!1}),[W,Y]=i.useState(()=>typeof window=="undefined"?!1:window.innerWidth<=768||window.innerHeight<=768||"ontouchstart"in window||navigator.maxTouchPoints>0),[G,te]=i.useState(null),[B,ae]=i.useState(null),[se,oe]=i.useState(null),[me,ge]=i.useState(null),[l,x]=i.useState(28),w=i.useRef(null),S=i.useRef(null),g=i.useRef(null),j=i.useRef(null),E=i.useRef(null),I=i.useRef(null),b=i.useRef(null),R=8,Z=n*1e3,re=i.useCallback(()=>{const v=[];for(let $=0;$<tt;$++)v.push(et(Z+Date.now()+$));f(v)},[Z]);i.useEffect(()=>{re()},[re]);const Se=i.useCallback(()=>{const v=!k;P(v),X.set(rt,v,{silent:!0})},[k]);i.useEffect(()=>{const v=()=>{typeof window!="undefined"&&Y(window.innerWidth<=768||window.innerHeight<=768||"ontouchstart"in window||navigator.maxTouchPoints>0)};return window.addEventListener("resize",v),window.addEventListener("orientationchange",v),()=>{window.removeEventListener("resize",v),window.removeEventListener("orientationchange",v)}},[]),i.useEffect(()=>{if(c.length===0)return;an(o,c)||p(!0)},[o,c]),i.useEffect(()=>{d<=y||(C(d),X.set(at,d,{silent:!0}))},[d,y]);const K=i.useCallback((v,$,ee)=>{const U=c[ee],q=He(U);if(!q||!he(o,q,v,$))return;Ge.playPlace();let ne=tn(o,q,v,$,H,U);D(M=>M+1);let T=0;for(;;){const{rows:M,cols:_}=sn(ne);if(M.length===0&&_.length===0)break;T+=M.length+_.length,ne=on(ne,M,_)}const O=q.flat().filter(Boolean).length,V=rn(O,T);m(M=>M+V),r(ne);const A=c.filter((M,_)=>_!==ee);A.length<tt&&A.push(et(Z+Date.now()+A.length)),f(A),h(null)},[o,c,H,Z]),Le=i.useCallback((v,$)=>{if(!N&&u!==null){K(v,$,u);return}},[N,u,K]),Me=i.useCallback((v,$,ee)=>{if(N)return;const U=c[v],q=He(U);q&&(te({x:$,y:ee,index:v,shapeIdx:U,shape:q}),j.current={index:v})},[c,N]),_e=i.useCallback(v=>{N||h($=>$===v?null:v)},[N]);g.current=B,w.current=se,i.useEffect(()=>{if(!G&&!B)return;const v=(T,O)=>{const V=g.current;if(V&&E.current?(E.current.style.left=`${T}px`,E.current.style.top=`${O}px`):ge({x:T,y:O}),G&&!B){const A=T-G.x,M=O-G.y;if(Math.sqrt(A*A+M*M)>=R){const _={index:G.index,shapeIdx:G.shapeIdx,shape:G.shape};ae(_),g.current=_,te(null),j.current=null,ge({x:T,y:O})}}V&&(b.current={x:T,y:O},I.current==null&&(I.current=requestAnimationFrame(()=>{var le;I.current=null;const A=b.current,M=g.current;if(!A||!M)return;const _=(le=a.current)==null?void 0:le.getCellFromPoint(A.x,A.y);if(_){S.current=_;const ue=We(M.shape),F=_.row-ue.row,J=_.col-ue.col,L=he(o,M.shape,F,J)?{row:F,col:J}:ot(o,M.shape,_.row,_.col);if(L){const z=w.current;(!z||z.row!==L.row||z.col!==L.col)&&(oe(L),w.current=L)}else w.current!==null&&(oe(null),w.current=null)}else w.current!==null&&(oe(null),w.current=null)})))},$=T=>v(T.clientX,T.clientY),ee=T=>{T.preventDefault(),v(T.touches[0].clientX,T.touches[0].clientY)},U=(T,O)=>{var _;const V=w.current,A=g.current,M=S.current;if(A){const le=T!=null&&O!=null,ue=le&&((_=a.current)==null?void 0:_.getCellFromPoint(T,O))!=null;if(!(le&&!ue)){let F=V&&he(o,A.shape,V.row,V.col)?V:M?ot(o,A.shape,M.row,M.col):null;F&&K(F.row,F.col,A.index)}}I.current!=null&&(cancelAnimationFrame(I.current),I.current=null),b.current=null,ae(null),te(null),oe(null),ge(null),w.current=null,S.current=null,g.current=null,j.current=null},q=T=>{window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",q),U(T.clientX,T.clientY)},ne=T=>{window.removeEventListener("touchmove",ee,{capture:!0}),window.removeEventListener("touchend",ne,{capture:!0});const O=T.changedTouches[0];U(O==null?void 0:O.clientX,O==null?void 0:O.clientY)};return window.addEventListener("mousemove",$),window.addEventListener("mouseup",q),window.addEventListener("touchmove",ee,{passive:!1,capture:!0}),window.addEventListener("touchend",ne,{capture:!0}),()=>{window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",q),window.removeEventListener("touchmove",ee,{capture:!0}),window.removeEventListener("touchend",ne,{capture:!0})}},[G,B,o,K]);const Pe=i.useMemo(()=>!B||!se||!he(o,B.shape,se.row,se.col)?null:{shape:B.shape,row:se.row,col:se.col,colorIndex:B.shapeIdx},[B,se,o]),ke=()=>{r(st(Fe)),m(0),p(!1),h(null),ae(null),oe(null),D(1),re()};return s.jsxs("div",{className:"game-screen",children:[s.jsx("div",{className:`game-board-container ${W&&k?"landscape-mode":""}`,children:s.jsx("div",{className:`game-area ${N?"game-over":""}`,children:s.jsx("div",{className:"game-view-16-9",children:s.jsx(pt,{ref:a,grid:o,onCellClick:Le,preview:Pe,onLayout:v=>x(v.cellSize),score:d,scoreLabel:t("game.score"),bestScore:y,bestScoreLabel:t("game.bestScore"),onBack:e,backLabel:t("game.backToStage"),placeHintLabel:t("game.placeHint"),currentBlockIndices:c,selectedIndex:u,onBlockTrayClick:_e,onBlockTrayPointerDown:Me,isLandscapeMode:W?k:!1})})})}),W&&s.jsxs("button",{type:"button",className:`orientation-toggle-button ${k?"landscape-mode":""}`,onClick:Se,"aria-label":t(k?"game.switchToPortrait":"game.switchToLandscape"),title:t(k?"game.switchToPortrait":"game.switchToLandscape"),children:[s.jsx("span",{className:"orientation-icon",children:k?"ðŸ“±":"ðŸ”„"}),s.jsx("span",{className:"orientation-text",children:t(k?"game.portraitMode":"game.landscapeMode")})]}),B&&me&&typeof document!="undefined"&&lt.createPortal(s.jsx("div",{ref:E,className:`game-drag-ghost ${W&&k?"landscape-mode":""}`,style:{left:me.x,top:me.y},"aria-hidden":!0,children:s.jsx(un,{shape:B.shape,colorIndex:B.shapeIdx,size:l})}),document.body),N&&s.jsx("div",{className:"game-overlay",children:s.jsxs("div",{className:"game-over-box",children:[s.jsx("h2",{children:t("game.gameOver")}),s.jsxs("p",{children:[t("game.score"),": ",d]}),s.jsxs("p",{className:"game-over-best",children:[t("game.bestScore"),": ",y]}),s.jsxs("div",{className:"game-over-buttons",children:[s.jsx("button",{type:"button",onClick:ke,children:t("game.playAgain")}),s.jsx("button",{type:"button",onClick:e,children:t("game.backToStage")})]})]})})]})};function un({shape:n,colorIndex:e,size:t=24}){var P,W;const a=ve(e),o=n.length,r=(W=(P=n[0])==null?void 0:P.length)!=null?W:0,c=t,f=r*c,u=o*c,h=We(n),d=h.col*c+c/2,m=h.row*c+c/2,y=f/2-d,C=u/2-m,N=4,p=Math.min(0,y)-N,H=Math.min(0,C)-N,D=f+Math.abs(y)+N*2,k=u+Math.abs(C)+N*2;return s.jsx("svg",{width:D,height:k,viewBox:`${p} ${H} ${D} ${k}`,className:"block-preview-svg",children:s.jsx("g",{transform:`translate(${y}, ${C})`,children:n.map((Y,G)=>Y.map((te,B)=>te?s.jsx("rect",{x:B*c+1,y:G*c+1,width:c-1,height:c-1,fill:a,stroke:"rgba(255,255,255,0.4)",strokeWidth:1,rx:4},`${G}-${B}`):null))})})}const dn="https://chipgames.github.io/ChipBlockCrush/",hn=({title:n,description:e,keywords:t,url:a=dn})=>{const{t:o,language:r}=Q(),c=n!=null?n:o("seo.title"),f=e!=null?e:o("seo.description"),u=t!=null?t:o("seo.keywords"),h=r!=="ko"?`?lang=${r}`:"";return s.jsxs(kt,{children:[s.jsx("title",{children:c}),s.jsx("meta",{name:"description",content:f}),s.jsx("meta",{name:"keywords",content:u}),s.jsx("meta",{property:"og:title",content:c}),s.jsx("meta",{property:"og:description",content:f}),s.jsx("meta",{property:"og:type",content:"website"}),s.jsx("meta",{property:"og:url",content:a+h}),s.jsx("link",{rel:"canonical",href:a+h})]})};function fn(){if(typeof window=="undefined"||!("serviceWorker"in navigator))return;const n="/ChipBlockCrush/";window.addEventListener("load",()=>{navigator.serviceWorker.register(`${n}sw.js`,{scope:n}).catch(()=>{})})}const Re="chipBlockCrush_orientationLocked",mn=()=>{dt();const{t:n}=Q();i.useEffect(()=>{fn()},[]);const[e,t]=i.useState("menu"),[a,o]=i.useState(null),[r,c]=i.useState(()=>typeof window=="undefined"?!1:window.innerWidth<=768||window.innerHeight<=768||"ontouchstart"in window||navigator.maxTouchPoints>0),[f,u]=i.useState(()=>{var p;return(p=typeof window!="undefined"&&X.get(Re,{fallback:"false"})==="true")!=null?p:!1}),[h,d]=i.useState(!1),m=p=>{t(p)},y=()=>{o(1),t("game")},C=()=>{t("menu"),o(null)},N=()=>de(xe,null,function*(){const p=screen;if(typeof window=="undefined"||!p.orientation){alert(n("header.orientationUnlock"));return}const H=p.orientation;try{if(f)yield H.unlock(),u(!1),X.set(Re,"false",{silent:!0});else{try{const P=document.documentElement;P.requestFullscreen?yield P.requestFullscreen():P.webkitRequestFullscreen&&(yield P.webkitRequestFullscreen())}catch(P){}const k=H.type.startsWith("portrait")?"portrait":"landscape";yield H.lock(k),u(!0),X.set(Re,"true",{silent:!0})}}catch(D){console.warn("í™”ë©´ ê³ ì • ì‹¤íŒ¨:",D);const k=D instanceof Error?D.message:String(D);(k.includes("not allowed")||k.includes("denied"))&&alert(n("header.orientationUnlock"))}});return i.useEffect(()=>{const p=()=>{typeof window!="undefined"&&c(window.innerWidth<=768||window.innerHeight<=768||"ontouchstart"in window||navigator.maxTouchPoints>0)};return window.addEventListener("resize",p),window.addEventListener("orientationchange",p),()=>{window.removeEventListener("resize",p),window.removeEventListener("orientationchange",p)}},[]),i.useEffect(()=>{const p=screen;if(typeof window=="undefined"||!p.orientation||!f)return;const H=p.orientation,k=H.type.startsWith("portrait")?"portrait":"landscape";H.lock(k).catch(()=>{u(!1),X.set(Re,"false",{silent:!0})})},[]),s.jsx(Lt,{children:s.jsxs(jt,{children:[s.jsx(hn,{}),s.jsxs("div",{className:`app-container${h?" menu-footer-hidden":""}`,children:[s.jsx(ft,{onNavigate:m,onStartGame:y,currentScreen:e}),s.jsxs(Dt,{children:[e==="guide"&&s.jsx(Yt,{onNavigate:m}),e==="help"&&s.jsx(Xt,{onNavigate:m}),e==="about"&&s.jsx(Kt,{onNavigate:m}),e==="privacy"&&s.jsx(Jt,{onNavigate:m}),e==="menu"&&s.jsx(Gt,{onNavigate:m,onStartGame:y}),e==="game"&&a!=null&&s.jsx(cn,{stageNumber:a,onBack:C})]}),s.jsx(mt,{onNavigate:m})]}),r&&typeof window!="undefined"&&screen.orientation?s.jsx("button",{type:"button",className:"orientation-lock-button",onClick:N,"aria-label":n(f?"header.orientationUnlock":"header.orientationLock"),title:n(f?"header.orientationUnlock":"header.orientationLock"),children:f?"ðŸ”’":"ðŸ”“"}):null,r&&s.jsx("button",{type:"button",className:"menu-footer-toggle",onClick:()=>d(p=>!p),"aria-label":n(h?"header.showMenuFooter":"header.hideMenuFooter"),title:n(h?"header.showMenuFooter":"header.hideMenuFooter"),children:h?"â˜°":"âœ•"})]})})};De.createRoot(document.getElementById("root")).render(s.jsx(St.StrictMode,{children:s.jsx(mn,{})}))});export default gn();
