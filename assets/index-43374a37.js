var W=Object.defineProperty;var z=(n,o,t)=>o in n?W(n,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[o]=t;var U=(n,o)=>()=>(o||n((o={exports:{}}).exports,o),o.exports);var O=(n,o,t)=>(z(n,typeof o!="symbol"?o+"":o,t),t);var v=(n,o,t)=>new Promise((c,a)=>{var l=r=>{try{u(t.next(r))}catch(i){a(i)}},h=r=>{try{u(t.throw(r))}catch(i){a(i)}},u=r=>r.done?c(r.value):Promise.resolve(r.value).then(l,h);u((t=t.apply(n,o)).next())});import{r as s,j as e,c as q,R as V}from"./vendor-dfffe2de.js";import{u as j,S as K,L as Y,s as x,a as T,_ as C}from"./game-0053460a.js";import{W as J,q as Q}from"./helmet-93c4691a.js";var he=U(M=>{(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))c(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&c(h)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();class X extends s.Component{constructor(){super(...arguments);O(this,"state",{hasError:!1})}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,c){console.error("[ChipBlockCrush]",t,c)}render(){return this.state.hasError?e.jsxs("div",{className:"error-boundary",children:[e.jsx("h2",{children:"ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"}),e.jsx("p",{children:"íŽ˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨ í•´ ì£¼ì„¸ìš”."}),e.jsx("button",{type:"button",onClick:()=>window.location.reload(),children:"ìƒˆë¡œê³ ì¹¨"})]}):this.props.children}}function A(){const[n,o]=s.useState(null),[t,c]=s.useState(!1),[a,l]=s.useState(!1);return s.useEffect(()=>{if(typeof window=="undefined")return;const r=window.matchMedia("(display-mode: standalone)").matches||navigator.standalone===!0;c(r);const i=/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1;l(i);const d=p=>{p.preventDefault(),o(p)};return window.addEventListener("beforeinstallprompt",d),()=>window.removeEventListener("beforeinstallprompt",d)},[]),{canInstall:!!n&&!t,isIOS:a,isStandalone:t,promptInstall:()=>v(this,null,function*(){n&&(yield n.prompt(),yield n.userChoice,o(null))})}}const _=s.memo(()=>{const{language:n,setLanguage:o}=j();return e.jsx("select",{className:"language-selector",value:n,onChange:t=>o(t.target.value),"aria-label":"ì–¸ì–´ ì„ íƒ",children:K.map(t=>e.jsx("option",{value:t,children:Y[t]},t))})});_.displayName="LanguageSelector";const I="theme",Z=()=>{if(typeof window=="undefined")return"dark";try{return window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"}catch(n){return"dark"}},L=n=>{if(typeof document=="undefined")return;document.documentElement.setAttribute("data-theme",n);const o=document.querySelector('meta[name="theme-color"]');o&&o.setAttribute("content",n==="light"?"#f5f5f8":"#1a1a2e")},F=()=>{const[n,o]=s.useState(()=>{const a=x.get(I,{fallback:null,silent:!0});return a==="light"||a==="dark"?a:Z()}),t=s.useCallback(()=>{o(a=>{const l=a==="light"?"dark":"light";return x.set(I,l,{silent:!0}),L(l),l})},[]),c=s.useCallback(a=>{o(a),x.set(I,a,{silent:!0}),L(a)},[]);return s.useEffect(()=>{L(n)},[n]),{theme:n,toggleTheme:t,setTheme:c,isLight:n==="light",isDark:n==="dark"}},$=s.memo(()=>{const{t:n}=j(),{theme:o,toggleTheme:t}=F(),c=o==="light";return e.jsx("button",{type:"button",className:"theme-toggle",onClick:t,title:n(c?"header.darkMode":"header.lightMode"),"aria-label":n(c?"header.darkMode":"header.lightMode"),children:c?"ðŸŒ™":"â˜€ï¸"})});$.displayName="ThemeToggle";const D=s.memo(({onNavigate:n,onStartGame:o})=>{const{t}=j(),{canInstall:c,isIOS:a,isStandalone:l,promptInstall:h}=A(),u=!l,[r,i]=s.useState(()=>{var f;return(f=x.get("soundEnabled",{fallback:!0,silent:!0}))!=null?f:!0}),[d,p]=s.useState(!1);s.useEffect(()=>{T.setEnabled(r),x.set("soundEnabled",r,{silent:!0})},[r]),s.useEffect(()=>(document.body.style.overflow=d?"hidden":"",()=>{document.body.style.overflow=""}),[d]);const g=f=>{n==null||n(f),p(!1)},b=()=>{i(f=>!f),r&&T.playClick()},E=()=>v(M,null,function*(){c?(yield h(),p(!1)):a?(window.alert(t("menu.installInstructionsIOS")),p(!1)):(window.alert(t("menu.installInstructionsFallback")),p(!1))});return e.jsx("header",{className:"header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{className:"header-logo",onClick:()=>g("menu"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&g("menu"),children:[e.jsx("img",{src:"/ChipBlockCrush/ChipGames_Logo.png",alt:t("header.logo"),className:"header-logo-img",fetchPriority:"high",decoding:"async"}),e.jsx("span",{className:"header-game-title",children:t("header.gameTitle")})]}),d&&e.jsx("div",{className:"header-nav-overlay",onClick:()=>p(!1),"aria-hidden":!0}),e.jsxs("nav",{className:`header-nav ${d?"mobile-open":""}`,children:[e.jsx("button",{type:"button",className:"header-nav-button",onClick:()=>o?o():g("menu"),children:t("header.playGame")}),e.jsx("button",{type:"button",className:"header-nav-button",onClick:()=>g("guide"),children:t("header.guide")}),e.jsx("button",{type:"button",className:"header-nav-button",onClick:()=>g("help"),children:t("header.help")}),e.jsx("button",{type:"button",className:"header-nav-button",onClick:()=>g("about"),children:t("header.about")}),u&&e.jsx("button",{type:"button",className:"header-nav-button header-nav-button-download",onClick:E,children:t("header.download")})]}),e.jsxs("div",{className:"header-right",children:[e.jsx($,{}),e.jsx("button",{type:"button",className:"header-sound-button",onClick:b,title:t(r?"header.soundOff":"header.soundOn"),"aria-label":t(r?"header.soundOff":"header.soundOn"),children:r?"ðŸ”Š":"ðŸ”‡"}),e.jsx(_,{}),e.jsxs("button",{type:"button",className:"header-hamburger",onClick:()=>p(f=>!f),"aria-label":"ë©”ë‰´","aria-expanded":d,children:[e.jsx("span",{className:`hamburger-line ${d?"active":""}`}),e.jsx("span",{className:`hamburger-line ${d?"active":""}`}),e.jsx("span",{className:`hamburger-line ${d?"active":""}`})]})]})]})})});D.displayName="Header";const ee="1.0.6",G=s.memo(({onNavigate:n,onOpenContact:o})=>{const{t}=j();return e.jsx("footer",{id:"contact",className:"footer",role:"contentinfo",children:e.jsxs("div",{className:"footer-content",children:[e.jsxs("nav",{className:"footer-links",children:[n?e.jsx("button",{type:"button",className:"footer-link footer-link-button",onClick:()=>n("privacy"),children:t("footer.privacy")}):e.jsx("a",{href:"#privacy",className:"footer-link",children:t("footer.privacy")}),o?e.jsx("button",{type:"button",className:"footer-link footer-link-button",onClick:o,children:t("footer.contact")}):e.jsx("a",{href:"#contact",className:"footer-link",children:t("footer.contact")})]}),e.jsx("div",{className:"footer-center",children:e.jsx(_,{})}),e.jsxs("div",{className:"footer-copyright",children:[t("footer.copyright")," | v",ee]})]})})});G.displayName="Footer";const te=({children:n})=>e.jsx("div",{className:"game-container",children:n}),ne=({onNavigate:n,onStartGame:o})=>{const{t}=j(),{canInstall:c,isIOS:a,isStandalone:l,promptInstall:h}=A(),[u,r]=s.useState(!1),[i,d]=s.useState(null),p=!l,g=()=>v(M,null,function*(){c?yield h():a?(d("ios"),r(!0)):(d("fallback"),r(!0))});return e.jsxs("div",{className:"menu-screen",children:[e.jsx("div",{className:"menu-logo-wrap",children:e.jsx("img",{src:"/ChipBlockCrush/ChipGames_Logo.png",alt:t("header.logo"),className:"menu-logo",fetchPriority:"high",decoding:"async"})}),e.jsx("h1",{className:"menu-title",children:t("header.gameTitle")}),e.jsx("p",{className:"menu-desc",children:t("menu.subtitle")}),e.jsx("button",{type:"button",className:"menu-play-btn",onClick:o,children:t("header.playGame")}),e.jsxs("nav",{className:"menu-links",children:[e.jsx("button",{type:"button",className:"menu-link",onClick:()=>n("guide"),children:t("header.guide")}),e.jsx("button",{type:"button",className:"menu-link",onClick:()=>n("help"),children:t("header.help")}),e.jsx("button",{type:"button",className:"menu-link",onClick:()=>n("about"),children:t("header.about")}),p&&e.jsx("button",{type:"button",className:"menu-link menu-link-download",onClick:g,children:t("header.download")})]}),u&&i&&e.jsx("div",{className:"menu-ios-install-overlay",onClick:()=>{r(!1),d(null)},role:"dialog","aria-modal":"true","aria-label":t(i==="ios"?"menu.installInstructionsIOS":"menu.installInstructionsFallback"),children:e.jsxs("div",{className:"menu-ios-install-box",onClick:b=>b.stopPropagation(),children:[e.jsx("p",{className:"menu-ios-install-text",children:t(i==="ios"?"menu.installInstructionsIOS":"menu.installInstructionsFallback")}),e.jsx("button",{type:"button",className:"menu-ios-install-close",onClick:()=>{r(!1),d(null)},children:t("menu.confirm")})]})})]})},P="chipwebgames@gmail.com",oe=({open:n,onClose:o})=>{const{t}=j();return s.useEffect(()=>{if(!n)return;const c=a=>{a.key==="Escape"&&o()};return document.addEventListener("keydown",c),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",c),document.body.style.overflow=""}},[n,o]),n?e.jsx("div",{className:"contact-modal-overlay",onClick:o,role:"dialog","aria-modal":"true","aria-labelledby":"contact-modal-title",children:e.jsxs("div",{className:"contact-modal-box",onClick:c=>c.stopPropagation(),children:[e.jsxs("div",{className:"contact-modal-header",children:[e.jsx("h2",{id:"contact-modal-title",className:"contact-modal-title",children:t("contactModal.title")}),e.jsx("button",{type:"button",className:"contact-modal-close",onClick:o,"aria-label":t("contactModal.close"),children:"Ã—"})]}),e.jsxs("div",{className:"contact-modal-body",children:[e.jsxs("section",{className:"contact-modal-section",children:[e.jsx("h3",{className:"contact-modal-section-title",children:t("contactModal.section1Title")}),e.jsx("p",{className:"contact-modal-section-content",children:t("contactModal.section1Content")})]}),e.jsxs("section",{className:"contact-modal-section",children:[e.jsx("h3",{className:"contact-modal-section-title",children:t("contactModal.section2Title")}),e.jsx("p",{className:"contact-modal-section-content",children:t("contactModal.section2Content")})]}),e.jsxs("section",{className:"contact-modal-section",children:[e.jsx("h3",{className:"contact-modal-section-title",children:t("contactModal.section3Title")}),e.jsx("p",{className:"contact-modal-section-content",children:t("contactModal.section3Content")})]}),e.jsxs("section",{className:"contact-modal-section",children:[e.jsx("h3",{className:"contact-modal-section-title",children:t("contactModal.section4Title")}),e.jsx("p",{className:"contact-modal-section-content",children:t("contactModal.section4Content")})]}),e.jsxs("div",{className:"contact-modal-email-block",children:[e.jsx("p",{className:"contact-modal-email-instruction",children:t("contactModal.emailInstruction")}),e.jsxs("p",{className:"contact-modal-email-item",children:[e.jsxs("span",{className:"contact-modal-email-label",children:[t("contactModal.emailLabel")," "]}),e.jsx("a",{href:`mailto:${P}`,className:"contact-modal-email-link",children:P})]})]})]})]})}):null},ae="https://chipgames.github.io/ChipBlockCrush/",se=({title:n,description:o,keywords:t,url:c=ae})=>{const{t:a,language:l}=j(),h=n!=null?n:a("seo.title"),u=o!=null?o:a("seo.description"),r=t!=null?t:a("seo.keywords"),i=l!=="ko"?`?lang=${l}`:"";return e.jsxs(J,{children:[e.jsx("title",{children:h}),e.jsx("meta",{name:"description",content:u}),e.jsx("meta",{name:"keywords",content:r}),e.jsx("meta",{property:"og:title",content:h}),e.jsx("meta",{property:"og:description",content:u}),e.jsx("meta",{property:"og:type",content:"website"}),e.jsx("meta",{property:"og:url",content:c+i}),e.jsx("link",{rel:"canonical",href:c+i})]})};function ce(){if(typeof window=="undefined"||!("serviceWorker"in navigator))return;const n="/ChipBlockCrush/";window.addEventListener("load",()=>{navigator.serviceWorker.register(`${n}sw.js`,{scope:n}).catch(()=>{})})}const le=s.lazy(()=>C(()=>import("./GuideScreen-df1b3de2.js"),["assets/GuideScreen-df1b3de2.js","assets/vendor-dfffe2de.js","assets/helmet-93c4691a.js","assets/game-0053460a.js","assets/game-4bb5169d.css","assets/GuideScreen-602191f2.css"])),re=s.lazy(()=>C(()=>import("./HelpScreen-8176ee03.js"),["assets/HelpScreen-8176ee03.js","assets/vendor-dfffe2de.js","assets/helmet-93c4691a.js","assets/game-0053460a.js","assets/game-4bb5169d.css","assets/HelpScreen-58da8a6b.css"])),ie=s.lazy(()=>C(()=>import("./AboutScreen-1019b2c9.js"),["assets/AboutScreen-1019b2c9.js","assets/vendor-dfffe2de.js","assets/helmet-93c4691a.js","assets/game-0053460a.js","assets/game-4bb5169d.css","assets/AboutScreen-24113894.css"])),de=s.lazy(()=>C(()=>import("./PrivacyScreen-f0140b3e.js"),["assets/PrivacyScreen-f0140b3e.js","assets/vendor-dfffe2de.js","assets/helmet-93c4691a.js","assets/game-0053460a.js","assets/game-4bb5169d.css","assets/PrivacyScreen-ac52f5c6.css"])),ue=s.lazy(()=>C(()=>import("./game-0053460a.js").then(n=>n.G),["assets/game-0053460a.js","assets/vendor-dfffe2de.js","assets/helmet-93c4691a.js","assets/game-4bb5169d.css"])),S="chipBlockCrush_orientationLocked",me=()=>{F();const{t:n}=j();s.useEffect(()=>{ce()},[]);const[o,t]=s.useState("menu"),[c,a]=s.useState(null),[l,h]=s.useState(()=>typeof window=="undefined"?!1:window.innerWidth<=768||window.innerHeight<=768||"ontouchstart"in window||navigator.maxTouchPoints>0),[u,r]=s.useState(()=>{var m;return(m=typeof window!="undefined"&&x.get(S,{fallback:"false"})==="true")!=null?m:!1}),[i,d]=s.useState(!1),[p,g]=s.useState(!1),b=s.useCallback(m=>{t(m)},[]),E=s.useCallback(()=>{a(1),t("game")},[]),f=s.useCallback(()=>{t("menu"),a(null)},[]),R=s.useCallback(()=>g(!0),[]),B=s.useCallback(()=>g(!1),[]),H=()=>v(M,null,function*(){const m=screen;if(typeof window=="undefined"||!m.orientation){alert(n("header.orientationUnlock"));return}const y=m.orientation;try{if(u)yield y.unlock(),r(!1),x.set(S,"false",{silent:!0});else{try{const N=document.documentElement;N.requestFullscreen?yield N.requestFullscreen():N.webkitRequestFullscreen&&(yield N.webkitRequestFullscreen())}catch(N){}const w=y.type.startsWith("portrait")?"portrait":"landscape";yield y.lock(w),r(!0),x.set(S,"true",{silent:!0})}}catch(k){console.warn("í™”ë©´ ê³ ì • ì‹¤íŒ¨:",k);const w=k instanceof Error?k.message:String(k);(w.includes("not allowed")||w.includes("denied"))&&alert(n("header.orientationUnlock"))}});return s.useEffect(()=>{const m=()=>{typeof window!="undefined"&&h(window.innerWidth<=768||window.innerHeight<=768||"ontouchstart"in window||navigator.maxTouchPoints>0)};return window.addEventListener("resize",m),window.addEventListener("orientationchange",m),()=>{window.removeEventListener("resize",m),window.removeEventListener("orientationchange",m)}},[]),s.useEffect(()=>{const m=screen;if(typeof window=="undefined"||!m.orientation||!u)return;const y=m.orientation,w=y.type.startsWith("portrait")?"portrait":"landscape";y.lock(w).catch(()=>{r(!1),x.set(S,"false",{silent:!0})})},[]),e.jsx(X,{children:e.jsxs(Q,{children:[e.jsx(se,{}),e.jsxs("div",{className:`app-container${i?" menu-footer-hidden":""}`,children:[e.jsx(D,{onNavigate:b,onStartGame:E,currentScreen:o}),e.jsx(te,{children:e.jsxs(s.Suspense,{fallback:e.jsx("div",{className:"app-screen-fallback","aria-live":"polite"}),children:[o==="guide"&&e.jsx(le,{onNavigate:b}),o==="help"&&e.jsx(re,{onNavigate:b}),o==="about"&&e.jsx(ie,{onNavigate:b}),o==="privacy"&&e.jsx(de,{onNavigate:b}),o==="menu"&&e.jsx(ne,{onNavigate:b,onStartGame:E}),o==="game"&&c!=null&&e.jsx(ue,{stageNumber:c,onBack:f})]})}),e.jsx(G,{onNavigate:b,onOpenContact:R})]}),e.jsx(oe,{open:p,onClose:B}),l&&typeof window!="undefined"&&screen.orientation?e.jsx("button",{type:"button",className:"orientation-lock-button",onClick:H,"aria-label":n(u?"header.orientationUnlock":"header.orientationLock"),title:n(u?"header.orientationUnlock":"header.orientationLock"),children:u?"ðŸ”’":"ðŸ”“"}):null,l&&e.jsx("button",{type:"button",className:"menu-footer-toggle",onClick:()=>d(m=>!m),"aria-label":n(i?"header.showMenuFooter":"header.hideMenuFooter"),title:n(i?"header.showMenuFooter":"header.hideMenuFooter"),children:i?"â˜°":"âœ•"})]})})};q.createRoot(document.getElementById("root")).render(e.jsx(V.StrictMode,{children:e.jsx(me,{})}))});export default he();
